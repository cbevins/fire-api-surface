import { DateTime } from './DateTime.js'

test('DateTime accessors', () => {
  const dt = new DateTime(1952, 9, 4, 16, 20, 30, 123)
  expect(dt.asArray()).toEqual([1952, 9, 4, 16, 20, 30, 123])
  expect(dt.asDhmsu()).toEqual([4, 16, 20, 30, 123])
  expect(dt.asHmsu()).toEqual([16, 20, 30, 123])
  expect(dt.asYmd()).toEqual([1952, 9, 4])
  expect(dt.clockTime()).toEqual('16:20:30')
  expect(dt.day()).toEqual(4)
  expect(dt.daysInMonth()).toEqual(30)
  expect(dt.decimalTime()).toEqual(0.6809042013888889)
  expect(dt.dow()).toEqual(4)
  expect(dt.dowAbbr()).toEqual('Thu')
  expect(dt.dowName()).toEqual('Thursday')
  expect(dt.doy()).toEqual(248)
  expect(dt.formatDate()).toEqual('1952-09-04')
  expect(dt.formatTime()).toEqual('16:20:30')
  expect(dt.hour()).toEqual(16)
  expect(dt.isGregorian()).toEqual(true)
  expect(dt.isLeapYear()).toEqual(true)
  expect(dt.jd()).toEqual(2434259.5)
  expect(dt.minute()).toEqual(20)
  expect(dt.month()).toEqual(9)
  expect(dt.mjd()).toEqual(34259)
  expect(dt.monthAbbr()).toEqual('Sep')
  expect(dt.monthName()).toEqual('September')
  expect(dt.ms()).toEqual(123)
  expect(dt.second()).toEqual(30)
  expect(dt.year()).toEqual(1952)
})

test('2: DateTime updaters', () => {
  const dt = new DateTime(2000)
  expect(dt.year()).toEqual(2000)
  expect(dt.month()).toEqual(1)
  expect(dt.day()).toEqual(1)
  expect(dt.hour()).toEqual(0)
  expect(dt.minute()).toEqual(0)
  expect(dt.second()).toEqual(0)
  expect(dt.ms()).toEqual(0)

  expect(dt.dow()).toEqual(6)
  expect(dt.doy()).toEqual(1)
  expect(dt.jd()).toEqual(2451544.5)
  expect(dt.mjd()).toEqual(51544)

  dt.setTime(1, 2, 3, 4)
  expect(dt.year()).toEqual(2000)
  expect(dt.month()).toEqual(1)
  expect(dt.day()).toEqual(1)
  expect(dt.hour()).toEqual(1)
  expect(dt.minute()).toEqual(2)
  expect(dt.second()).toEqual(3)
  expect(dt.ms()).toEqual(4)

  expect(dt.dow()).toEqual(6)
  expect(dt.doy()).toEqual(1)
  expect(dt.jd()).toEqual(2451544.5)
  expect(dt.mjd()).toEqual(51544)

  dt.setDate(2021, 4, 25)
  expect(dt.year()).toEqual(2021)
  expect(dt.month()).toEqual(4)
  expect(dt.day()).toEqual(25)
  expect(dt.hour()).toEqual(1)
  expect(dt.minute()).toEqual(2)
  expect(dt.second()).toEqual(3)
  expect(dt.ms()).toEqual(4)

  expect(dt.isLeapYear()).toEqual(false)
  expect(dt.dow()).toEqual(0)
  expect(dt.doy()).toEqual(115)
  expect(dt.jd()).toEqual(2459329.5)
  expect(dt.mjd()).toEqual(59329)

  dt.setDateTime(1952, 9, 4, 16, 20, 30, 123)
  expect(dt.dow()).toEqual(4)
  expect(dt.doy()).toEqual(248)
  expect(dt.jd()).toEqual(2434259.5)
  expect(dt.day()).toEqual(4)
  expect(dt.hour()).toEqual(16)
  expect(dt.isLeapYear()).toEqual(true)
  expect(dt.minute()).toEqual(20)
  expect(dt.month()).toEqual(9)
  expect(dt.mjd()).toEqual(34259)
  expect(dt.ms()).toEqual(123)
  expect(dt.second()).toEqual(30)
  expect(dt.year()).toEqual(1952)

  dt.setDateTime(1952, 9, 4)
  expect(dt.asArray()).toEqual([1952, 9, 4, 0, 0, 0, 0])

  dt.setDate(1952)
  expect(dt.asArray()).toEqual([1952, 1, 1, 0, 0, 0, 0])

  dt.setDateTime(1952)
  expect(dt.asArray()).toEqual([1952, 1, 1, 0, 0, 0, 0])

  dt.setDateTime(1952, 9, 4, 16, 20, 30, 123)
  expect(dt.asArray()).toEqual([1952, 9, 4, 16, 20, 30, 123])

  dt.setTime()
  expect(dt.asArray()).toEqual([1952, 9, 4, 0, 0, 0, 0])
})
